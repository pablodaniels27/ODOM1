<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.collections.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/11.0.14-internal" fx:controller="controllers.AuditoriaController">

    <!-- Contenedor principal -->
    <VBox spacing="10" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0">
        <!-- Título -->
        <Label text="Registro de Auditoría" style="-fx-font-size: 24px; -fx-font-weight: bold;" alignment="CENTER" />

        <!-- Filtros -->
        <GridPane hgap="20" vgap="10">
            <!-- Primera fila: Supervisor -->
            <HBox spacing="10" alignment="CENTER_LEFT" GridPane.columnIndex="0" GridPane.rowIndex="0">
                <Label text="Supervisor" style="-fx-font-weight: bold;" />
                <TextField fx:id="userFilterField" promptText="Nombre del supervisor" />
            </HBox>

            <!-- Segunda fila: Fechas -->
            <HBox spacing="20" alignment="CENTER_LEFT" GridPane.columnIndex="0" GridPane.rowIndex="1">
                <!-- Filtrar por fecha de inicio -->
                <HBox spacing="10" alignment="CENTER">
                    <Label text="Fecha Inicio" style="-fx-font-weight: bold;" />
                    <DatePicker fx:id="fechaInicioPicker" />
                </HBox>

                <!-- Filtrar por fecha final -->
                <HBox spacing="10" alignment="CENTER">
                    <Label text="Fecha Fin" style="-fx-font-weight: bold;" />
                    <DatePicker fx:id="fechaFinPicker" />
                </HBox>
            </HBox>

            <!-- Tercera fila: Filtro por acción y botón de búsqueda -->
            <HBox spacing="10" alignment="CENTER_LEFT" GridPane.columnIndex="0" GridPane.rowIndex="2">
                <!-- Filtrar por acción -->
                <Label text="Filtrar por acción:" style="-fx-font-weight: bold;" />
                <ComboBox fx:id="actionFilterComboBox">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="Todos" />
                            <String fx:value="Agregar" />
                            <String fx:value="Modificar" />
                            <String fx:value="Eliminar" />
                            <String fx:value="Consultar" />
                        </FXCollections>
                    </items>
                </ComboBox>
                <!-- Botón de Buscar -->
                <Button fx:id="searchButton" text="Buscar" onAction="#validateAndSearch" />
            </HBox>
        </GridPane>
    </VBox>

    <!-- Tabla de auditoría -->
    <VBox AnchorPane.topAnchor="150.0" AnchorPane.bottomAnchor="10.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0">
        <TableView fx:id="auditoriaTable">
            <!-- Table Columns -->
            <columns>
                <TableColumn fx:id="nombreCompletoSupervisor" text="Supervisor">
                    <cellValueFactory><PropertyValueFactory property="nombreSupervisor" /></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="departamentoColumn" text="Departamento">
                    <cellValueFactory><PropertyValueFactory property="departamentoNombre" /></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="accionColumn" text="Acción">
                    <cellValueFactory><PropertyValueFactory property="accion" /></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="nombreCompletoEmpleado" text="Empleado afectado">
                    <cellValueFactory><PropertyValueFactory property="nombreCompletoEmpleado" /></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="timestampColumn" text="Horario">
                    <cellValueFactory><PropertyValueFactory property="timestamp" /></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="detallesColumn" text="Detalles">
                    <cellValueFactory><PropertyValueFactory property="detalles" /></cellValueFactory>
                </TableColumn>
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
        </TableView>

        <!-- Controles de paginación -->
        <HBox fx:id="paginationBox" spacing="10" alignment="CENTER" style="-fx-padding: 10;">
            <Button fx:id="previousButton" text="Anterior" onAction="#handlePreviousPage" />
            <Label fx:id="currentPageLabel" text="Página 1 de N" />
            <Button fx:id="nextButton" text="Siguiente" onAction="#handleNextPage" />
        </HBox>
    </VBox>

</AnchorPane>
